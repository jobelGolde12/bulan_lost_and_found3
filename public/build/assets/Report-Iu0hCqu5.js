import{_ as Z,x as P,r as u,j as U,C as K,l as Q,c as r,o as a,a as j,f as X,h as p,u as n,m as _,w as ee,b as t,e as q,t as f,g as te,k as m,A as x,F as I,s as A,at as M,n as T}from"./app-BB0yyVeW.js";import{A as le}from"./AdminLayout-CC1qg2sF.js";import{L as oe}from"./LoadingComponent-vHlaBGFY.js";import"./lost_and_found_logo-Bi2rL7qL.js";const se={class:"main-container mb-5"},ne={class:"d-flex justify-content-end"},ae={key:0,class:"alert alert-info success-info",role:"alert"},re={class:"container mx-auto px-6 py-8"},ie={key:0,class:"alert alert-danger alert-dismissible fade show",role:"alert"},ue={class:"grid grid-cols-1 md:grid-cols-2 gap-6"},de=["value"],ge={class:"grid grid-cols-1 md:grid-cols-2 gap-6"},pe={key:0,class:"text-gray-500"},me={key:1,class:"text-green-500"},ce={key:0,class:"text-red-500 mt-2"},fe={class:"grid grid-cols-1 md:grid-cols-2 gap-6"},be=["value"],ve={key:0,class:"alert alert-warning alert-dismissible fade show",role:"alert"},ye=["disabled"],we=5*1024*1024,xe={__name:"Report",props:{categories:{type:Object,default:()=>({})},locations:{type:Array,default:()=>[]},errors:Object},setup(Y){var $;const C=Y,z=($=P().props.auth)==null?void 0:$.user,S=P(),d=u(!1),b=u(!1);U(()=>S.props.errors,l=>{l&&l.description&&(d.value=!0)},{immediate:!0}),U(()=>S.props.flash,l=>{l&&l.hasProfanity&&(d.value=!0)},{immediate:!0});const s=K({name:"",image:null,description:"",category:"",location:"",user_id:z.id,owner_phone_number:"",status:"lost",date:null}),G=Q(()=>C.locations),D=u(!1),F=u(null),i=u(!1),v=u(null),O=["image/jpeg","image/png","image/jpg","image/gif","image/svg+xml"],V=u(!1),B=l=>{l.preventDefault(),D.value=!0},L=l=>{D.value=l},N=l=>{if(v.value=null,!O.includes(l.type)){v.value="Invalid file type. Only JPEG, PNG, JPG, GIF, or SVG are allowed.",s.image=null;return}if(l.size>we){v.value="Image must not be larger than 5MB.",s.image=null;return}s.image=l},R=l=>{l.preventDefault(),L(!1);const e=l.dataTransfer.files;e.length&&N(e[0])},h=l=>{const e=l.target.files;e.length&&N(e[0])},H=()=>{F.value.click()},E=u(null),J=()=>{if(i.value=!0,d.value=!1,E.value=null,b.value=!1,!s.date){i.value=!1,b.value=!0;return}const l=new Date(s.date),e=new Date,w=new Date(l.getFullYear(),l.getMonth(),l.getDate(),l.getHours(),l.getMinutes(),0,0),o=new Date(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours(),e.getMinutes(),0,0);if(w.getTime()>=o.getTime()){i.value=!1,b.value=!0;return}const c=l,W=`${c.getFullYear()}-${String(c.getMonth()+1).padStart(2,"0")}-${String(c.getDate()).padStart(2,"0")} ${String(c.getHours()).padStart(2,"0")}:${String(c.getMinutes()).padStart(2,"0")}:${String(c.getSeconds()).padStart(2,"0")}`;s.transform(g=>{const k=new FormData;for(const y in g)y==="image"&&!g[y]||(y==="date"?k.append("date",W):k.append(y,g[y]));return k}).post(route("addItem"),{preserveState:!0,preserveScroll:!0,onSuccess:()=>{i.value=!1,V.value=!0,s.reset()},onError:g=>{i.value=!1,console.error("An error occurred while posting item:",g),g&&g.description&&(d.value=!0)}})};return(l,e)=>(a(),r(I,null,[j(n(_),{title:"Report Item"}),j(le,null,{default:ee(()=>{var w;return[t("div",se,[e[25]||(e[25]=t("h1",{class:"text-3xl font-light text-center mt-6"},"Report Item",-1)),t("div",ne,[V.value?(a(),r("div",ae," Successfully Reported. ")):p("",!0)]),t("div",re,[d.value?(a(),r("div",ie,[e[10]||(e[10]=t("strong",null,"Profanity Detected!",-1)),q(" "+f(((w=n(S).props.errors)==null?void 0:w.description)||"Your content contains inappropriate language.")+" ",1),t("button",{type:"button",class:"btn-close",onClick:e[0]||(e[0]=o=>d.value=!1),"aria-label":"Close"})])):p("",!0),t("form",{onSubmit:te(J,["prevent"]),class:"form space-y-6"},[t("div",ue,[t("div",null,[e[11]||(e[11]=t("label",{class:"text-gray-600 block mb-2"},"Lost or found name",-1)),m(t("input",{type:"text",placeholder:"e.g., Wallet",class:"w-full p-3 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-400","onUpdate:modelValue":e[1]||(e[1]=o=>n(s).name=o),required:""},null,512),[[x,n(s).name]])]),t("div",null,[e[13]||(e[13]=t("label",{class:"text-gray-600 block mb-2"},"Location (Where did lost or found it?)",-1)),m(t("select",{class:"w-full p-3 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-400","onUpdate:modelValue":e[2]||(e[2]=o=>n(s).location=o),required:""},[e[12]||(e[12]=t("option",{disabled:"",value:""},"Select a location",-1)),(a(!0),r(I,null,A(G.value,o=>(a(),r("option",{key:o,value:o.name},f(o.name),9,de))),128))],512),[[M,n(s).location]])])]),t("div",ge,[t("div",null,[e[14]||(e[14]=t("label",{class:"text-gray-600 block mb-2"},"Item Image (Optional)",-1)),t("div",{class:T(["border-2 rounded-lg p-6 text-center cursor-pointer hover:border-blue-400 focus:ring-2 focus:ring-blue-400",D.value?"border-blue-400":"border-gray-400"]),onDragover:B,onDragenter:B,onDragleave:e[3]||(e[3]=()=>L(!1)),onDrop:R},[n(s).image?p("",!0):(a(),r("p",pe,"Drag & Drop your image here or")),n(s).image?(a(),r("p",me,"Image selected: "+f(n(s).image.name),1)):p("",!0),t("input",{type:"file",accept:"image/*",class:"hidden",ref_key:"fileInput",ref:F,onChange:h},null,544),t("button",{type:"button",class:"text-blue-500 underline",onClick:H}," Browse ")],34),v.value?(a(),r("p",ce,f(v.value),1)):p("",!0),e[15]||(e[15]=t("p",{class:"text-muted mt-2"},"Maximum of 5MB",-1))]),t("div",null,[e[16]||(e[16]=t("label",{class:"text-gray-600 block mb-2"}," Description",-1)),m(t("textarea",{placeholder:"e.g., Brown wallet with initials, found in Zone 3.",class:T(["w-full p-3 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-400",{"border-red-500":d.value}]),"onUpdate:modelValue":e[4]||(e[4]=o=>n(s).description=o),required:""},null,2),[[x,n(s).description]])])]),t("div",fe,[t("div",null,[e[18]||(e[18]=t("label",{class:"text-gray-600 block mb-2"},"Category",-1)),m(t("select",{class:"w-full p-3 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-400","onUpdate:modelValue":e[5]||(e[5]=o=>n(s).category=o),required:""},[e[17]||(e[17]=t("option",{disabled:"",value:""},"Select a category",-1)),(a(!0),r(I,null,A(C.categories,o=>(a(),r("option",{key:o.id,value:o.id},f(o.name),9,be))),128))],512),[[M,n(s).category]])]),t("div",null,[e[19]||(e[19]=t("label",{class:"text-gray-600 block mb-2"},"Your Phone Number (Optional)",-1)),m(t("input",{type:"text",placeholder:"e.g., 09461284345",class:"w-full p-3 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-400","onUpdate:modelValue":e[6]||(e[6]=o=>n(s).owner_phone_number=o)},null,512),[[x,n(s).owner_phone_number]])])]),t("div",null,[e[21]||(e[21]=t("label",{class:"text-gray-600 block mb-2"},"Status",-1)),m(t("select",{class:"w-100 p-3 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-400","onUpdate:modelValue":e[7]||(e[7]=o=>n(s).status=o)},e[20]||(e[20]=[t("option",{value:"found"},"Found",-1),t("option",{value:"lost"},"Lost",-1)]),512),[[M,n(s).status]])]),t("div",null,[e[24]||(e[24]=t("label",null,"Date Lost/Found",-1)),m(t("input",{type:"datetime-local",class:"form-control py-3","onUpdate:modelValue":e[8]||(e[8]=o=>n(s).date=o),required:""},null,512),[[x,n(s).date]]),b.value?(a(),r("div",ve,[e[22]||(e[22]=t("strong",null,"Invalid Date!",-1)),e[23]||(e[23]=q(" You cannot report an item with a date and time equal to or later than the current moment. ")),t("button",{type:"button",class:"btn-close",onClick:e[9]||(e[9]=o=>b.value=!1),"aria-label":"Close"})])):p("",!0)]),t("button",{type:"submit",class:"w-100 btn btn-dark py-3",disabled:i.value},f(i.value?"Submitting...":"Submit"),9,ye)],32)])])]}),_:1}),i.value?(a(),X(oe,{key:0})):p("",!0)],64))}},Me=Z(xe,[["__scopeId","data-v-8b986581"]]);export{Me as default};
