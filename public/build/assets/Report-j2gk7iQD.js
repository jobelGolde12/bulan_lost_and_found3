import{_ as G,x as B,r as g,j as U,C as J,l as K,c as r,o as n,a as Y,u as s,m as Q,w as X,b as t,f as _,h as p,e as q,t as b,g as ee,k as m,A as x,F,s as z,at as C,n as A}from"./app-DhelKfHf.js";import{A as te}from"./AuthenticatedLayout-XSvHsR-E.js";import{L as le}from"./LoadingComponent-Ddhyj4_v.js";import"./lost_and_found_logo-Bi2rL7qL.js";/* empty css                                                                     */const oe={class:"main-container"},ae={class:"d-flex justify-content-end"},se={key:0,class:"alert alert-info success-info",role:"alert"},ne={class:"container mx-auto px-6 py-8"},re={key:0,class:"alert alert-danger alert-dismissible fade show",role:"alert"},ie={class:"grid grid-cols-1 md:grid-cols-2 gap-6"},ue=["value"],de={class:"grid grid-cols-1 md:grid-cols-2 gap-6"},ge={key:0,class:"text-gray-500"},pe={key:1,class:"text-green-500"},me={key:0,class:"text-red-500 mt-2"},fe={class:"grid grid-cols-1 md:grid-cols-2 gap-6"},ce=["value"],be={key:0,class:"alert alert-warning alert-dismissible fade show",role:"alert"},ve=["disabled"],ye=5*1024*1024,we={__name:"Report",props:{categories:{type:Object,default:()=>({})},locations:{type:Array,default:()=>[]},errors:Object},setup(T){var $;const I=T,h=($=B().props.auth)==null?void 0:$.user,D=B(),u=g(!1),M=g(!1),v=g(!1);U(()=>D.props.errors,o=>{o&&o.description&&(u.value=!0)},{immediate:!0}),U(()=>D.props.flash,o=>{o&&o.hasProfanity&&(u.value=!0)},{immediate:!0});const l=J({name:"",image:null,description:"",category:"",location:"",user_id:h.id,owner_phone_number:"",status:"lost",date:null}),O=K(()=>I.locations),k=g(!1),V=g(null),i=g(!1),f=g(null),P=["image/jpeg","image/png","image/jpg","image/gif","image/svg+xml"],j=o=>{o.preventDefault(),k.value=!0},L=o=>{k.value=o},N=o=>P.includes(o.type)?o.size>ye?(f.value="File too large. Maximum allowed size is 5MB.",l.image=null,!1):(f.value=null,!0):(f.value="Invalid file format. Only jpeg, png, jpg, gif, and svg are allowed.",l.image=null,!1),R=o=>{o.preventDefault(),L(!1);const e=o.dataTransfer.files;e.length&&N(e[0])&&(l.image=e[0])},H=o=>{const e=o.target.files;e.length&&N(e[0])&&(l.image=e[0])},W=()=>{V.value.click()},E=()=>{if(f.value){alert("Please fix the file error before submitting.");return}if(i.value=!0,u.value=!1,v.value=!1,!l.date){i.value=!1,v.value=!0;return}const o=new Date(l.date),e=new Date,w=new Date(o.getFullYear(),o.getMonth(),o.getDate(),o.getHours(),o.getMinutes(),0,0),a=new Date(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours(),e.getMinutes(),0,0);if(w.getTime()>=a.getTime()){i.value=!1,v.value=!0;return}const c=o,Z=`${c.getFullYear()}-${String(c.getMonth()+1).padStart(2,"0")}-${String(c.getDate()).padStart(2,"0")} ${String(c.getHours()).padStart(2,"0")}:${String(c.getMinutes()).padStart(2,"0")}:${String(c.getSeconds()).padStart(2,"0")}`;l.transform(d=>{const S=new FormData;for(const y in d)y==="image"&&!d[y]||(y==="date"?S.append("date",Z):S.append(y,d[y]));return S}).post(route("addItem"),{onSuccess:()=>{i.value=!1,M.value=!0,l.reset()},onError:d=>{i.value=!1,console.error("An error occurred while posting item:",d),d&&d.description&&(u.value=!0)}})};return(o,e)=>(n(),r(F,null,[Y(s(Q),{title:"Report Item"}),Y(te,null,{default:X(()=>{var w;return[t("div",oe,[e[24]||(e[24]=t("h1",{class:"text-3xl font-light text-center mt-6"},"Report Item",-1)),t("div",ae,[M.value?(n(),r("div",se," Submitted! Your item will be reviewed by the admin. We will notify you once itâ€™s approved. ")):p("",!0)]),t("div",ne,[u.value?(n(),r("div",re,[e[10]||(e[10]=t("strong",null,"Profanity Detected!",-1)),q(" "+b(((w=s(D).props.errors)==null?void 0:w.description)||"Your content contains inappropriate language.")+" ",1),t("button",{type:"button",class:"btn-close",onClick:e[0]||(e[0]=a=>u.value=!1),"aria-label":"Close"})])):p("",!0),t("form",{onSubmit:ee(E,["prevent"]),class:"form space-y-6"},[t("div",ie,[t("div",null,[e[11]||(e[11]=t("label",{class:"text-gray-600 block mb-2"},"Lost or Found Name",-1)),m(t("input",{type:"text",placeholder:"e.g., Wallet",class:"w-full p-3 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-400","onUpdate:modelValue":e[1]||(e[1]=a=>s(l).name=a),required:""},null,512),[[x,s(l).name]])]),t("div",null,[e[13]||(e[13]=t("label",{class:"text-gray-600 block mb-2"},"Location",-1)),m(t("select",{class:"w-full p-3 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-400","onUpdate:modelValue":e[2]||(e[2]=a=>s(l).location=a),required:""},[e[12]||(e[12]=t("option",{disabled:"",value:""},"Select a location",-1)),(n(!0),r(F,null,z(O.value,a=>(n(),r("option",{key:a,value:a.name},b(a.name),9,ue))),128))],512),[[C,s(l).location]])])]),t("div",de,[t("div",null,[e[14]||(e[14]=t("label",{class:"text-gray-600 block mb-2"},"Item Image (Optional)",-1)),t("div",{class:A(["border-2 rounded-lg p-6 text-center cursor-pointer",k.value?"border-blue-400":"border-gray-400"]),onDragover:j,onDragenter:j,onDragleave:e[3]||(e[3]=()=>L(!1)),onDrop:R},[s(l).image?p("",!0):(n(),r("p",ge,"Drag & Drop your image here or")),s(l).image?(n(),r("p",pe,"Image selected: "+b(s(l).image.name),1)):p("",!0),t("input",{type:"file",accept:"image/*",class:"hidden",ref_key:"fileInput",ref:V,onChange:H},null,544),t("button",{type:"button",class:"text-blue-500 underline",onClick:W},"Browse")],34),f.value?(n(),r("p",me,b(f.value),1)):p("",!0)]),t("div",null,[e[15]||(e[15]=t("label",{class:"text-gray-600 block mb-2"},"Description",-1)),m(t("textarea",{placeholder:"e.g., Brown wallet with initials, found in Zone 3.",class:A(["w-full p-3 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-400",{"border-red-500":u.value}]),"onUpdate:modelValue":e[4]||(e[4]=a=>s(l).description=a),required:""},null,2),[[x,s(l).description]])])]),t("div",fe,[t("div",null,[e[17]||(e[17]=t("label",{class:"text-gray-600 block mb-2"},"Category",-1)),m(t("select",{class:"w-full p-3 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-400","onUpdate:modelValue":e[5]||(e[5]=a=>s(l).category=a),required:""},[e[16]||(e[16]=t("option",{disabled:"",value:""},"Select a category",-1)),(n(!0),r(F,null,z(I.categories,a=>(n(),r("option",{key:a.id,value:a.id},b(a.name),9,ce))),128))],512),[[C,s(l).category]])]),t("div",null,[e[18]||(e[18]=t("label",{class:"text-gray-600 block mb-2"},"Your Phone Number (Optional)",-1)),m(t("input",{type:"text",placeholder:"e.g., 09461284345",class:"w-full p-3 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-400","onUpdate:modelValue":e[6]||(e[6]=a=>s(l).owner_phone_number=a)},null,512),[[x,s(l).owner_phone_number]])])]),t("div",null,[e[20]||(e[20]=t("label",{class:"text-gray-600 block mb-2"},"Status",-1)),m(t("select",{class:"w-full p-3 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-400","onUpdate:modelValue":e[7]||(e[7]=a=>s(l).status=a)},e[19]||(e[19]=[t("option",{value:"found"},"Found",-1),t("option",{value:"lost"},"Lost",-1)]),512),[[C,s(l).status]])]),t("div",null,[e[23]||(e[23]=t("label",null,"Date Lost/Found",-1)),m(t("input",{type:"datetime-local",class:"form-control py-3","onUpdate:modelValue":e[8]||(e[8]=a=>s(l).date=a),required:""},null,512),[[x,s(l).date]]),v.value?(n(),r("div",be,[e[21]||(e[21]=t("strong",null,"Invalid Date!",-1)),e[22]||(e[22]=q(" You cannot report an item with a date and time equal to or later than the current moment. ")),t("button",{type:"button",class:"btn-close",onClick:e[9]||(e[9]=a=>v.value=!1),"aria-label":"Close"})])):p("",!0)]),t("button",{type:"submit",class:"w-full btn btn-dark py-3",disabled:i.value},b(i.value?"Submitting...":"Submit"),9,ve)],32)])]),i.value?(n(),_(le,{key:0})):p("",!0)]}),_:1})],64))}},Ce=G(we,[["__scopeId","data-v-50ac33ba"]]);export{Ce as default};
