import{_ as U,C as k,r as v,z as j,c as a,o as r,b as e,h as u,e as g,g as L,k as d,A as m,u as l,t as c,at as C,F as V,s as R}from"./app-CkqW5iWM.js";const X={class:"container py-5"},I={class:"row justify-content-center"},F={class:"col-lg-8"},O={class:"card shadow-sm border-0 rounded-4"},N={class:"card-header d-flex align-items-center justify-content-between bg-white border-0 px-4 py-3"},S=["href"],B={class:"card-body p-4"},D={class:"row gx-4"},E={class:"col-md-6"},M={class:"mb-3"},T={key:0,class:"text-danger small"},A={class:"mb-3"},P={key:0,class:"text-danger small"},z={class:"mb-3"},W={key:0,class:"text-danger small"},q={class:"mb-3"},G={key:0,class:"text-danger small"},H={class:"mb-3"},J={class:"mb-3"},K={class:"col-md-6"},Q={class:"mb-3"},Y={class:"card rounded-3",style:{"min-height":"180px"}},Z={class:"card-body d-flex align-items-center justify-content-center"},$=["src"],ee={key:1,class:"text-center text-muted"},te={class:"mb-3 d-flex gap-2"},se={class:"mb-3"},le={class:"mb-3 mt-3"},oe={key:0,class:"text-danger small"},ie={class:"d-flex justify-content-end gap-2 mt-4"},ne=["href"],ae=["disabled"],re={key:0,class:"mt-3"},de={class:"alert alert-danger small p-2"},me={class:"mb-0"},ue={__name:"Edit",props:{item:Object},setup(_){const i=_,s=k({title:i.item.title??"",description:i.item.description??"",category:i.item.category??"",location:i.item.location??"",status:i.item.status??"Lost",contact_info:i.item.contact_info??"",owner_phone_number:i.item.owner_phone_number??"",date:i.item.date??null,image:null,remove_image:!1}),f=v(null),b=v(i.item.image_url??null);let n=null;function y(p){const t=p.target.files[0]||null;s.image=t,n&&(URL.revokeObjectURL(n),n=null),t?(n=URL.createObjectURL(t),b.value=n,s.remove_image=!1):b.value=i.item.image_url??null}function x(){f.value&&(f.value.value=null),s.image=null,s.remove_image=!0,n&&(URL.revokeObjectURL(n),n=null),b.value=null}j(()=>{n&&(URL.revokeObjectURL(n),n=null)});function h(){s.post(route("item.update",i.item.id),{method:"post",forceFormData:!0,data:{...s.data(),_method:"PUT"},preserveScroll:!0,onFinish:()=>s.reset("image")})}return(p,t)=>(r(),a("div",X,[e("div",I,[e("div",F,[e("div",O,[e("div",N,[t[9]||(t[9]=e("div",null,[e("h4",{class:"mb-0"},"Edit Item"),e("small",{class:"text-muted"},"Update item information and image")],-1)),e("div",null,[e("a",{href:p.route("dashboard"),class:"btn btn-sm btn-outline-secondary"},t[8]||(t[8]=[e("i",{class:"bi bi-arrow-left"},null,-1),g(" Back ")]),8,S)])]),e("div",B,[e("form",{onSubmit:L(h,["prevent"]),enctype:"multipart/form-data"},[e("div",D,[e("div",E,[e("div",M,[t[10]||(t[10]=e("label",{class:"form-label fw-semibold"},"Title",-1)),d(e("input",{type:"text","onUpdate:modelValue":t[0]||(t[0]=o=>l(s).title=o),class:"form-control form-control-lg",placeholder:"Item title"},null,512),[[m,l(s).title]]),l(s).errors.title?(r(),a("div",T,c(l(s).errors.title),1)):u("",!0)]),e("div",A,[t[11]||(t[11]=e("label",{class:"form-label fw-semibold"},"Category",-1)),d(e("input",{type:"text","onUpdate:modelValue":t[1]||(t[1]=o=>l(s).category=o),class:"form-control",placeholder:"Category (e.g. wallet, phone)"},null,512),[[m,l(s).category]]),l(s).errors.category?(r(),a("div",P,c(l(s).errors.category),1)):u("",!0)]),e("div",z,[t[13]||(t[13]=e("label",{class:"form-label fw-semibold"},"Status",-1)),d(e("select",{"onUpdate:modelValue":t[2]||(t[2]=o=>l(s).status=o),class:"form-select"},t[12]||(t[12]=[e("option",{value:"Lost"},"Lost",-1),e("option",{value:"Found"},"Found",-1),e("option",{value:"Claimed"},"Claimed",-1)]),512),[[C,l(s).status]]),l(s).errors.status?(r(),a("div",W,c(l(s).errors.status),1)):u("",!0)]),e("div",q,[t[14]||(t[14]=e("label",{class:"form-label fw-semibold"},"Date",-1)),d(e("input",{type:"date","onUpdate:modelValue":t[3]||(t[3]=o=>l(s).date=o),class:"form-control"},null,512),[[m,l(s).date]]),l(s).errors.date?(r(),a("div",G,c(l(s).errors.date),1)):u("",!0)]),e("div",H,[t[15]||(t[15]=e("label",{class:"form-label fw-semibold"},"Contact Info",-1)),d(e("input",{type:"text","onUpdate:modelValue":t[4]||(t[4]=o=>l(s).contact_info=o),class:"form-control",placeholder:"Name / email / phone"},null,512),[[m,l(s).contact_info]])]),e("div",J,[t[16]||(t[16]=e("label",{class:"form-label fw-semibold"},"Owner Phone Number",-1)),d(e("input",{type:"text","onUpdate:modelValue":t[5]||(t[5]=o=>l(s).owner_phone_number=o),class:"form-control",placeholder:"09XXXXXXXXX"},null,512),[[m,l(s).owner_phone_number]])])]),e("div",K,[t[20]||(t[20]=e("label",{class:"form-label fw-semibold"},"Image",-1)),e("div",Q,[e("div",Y,[e("div",Z,[b.value?(r(),a("img",{key:0,src:b.value,class:"img-fluid rounded",style:{"max-height":"240px","object-fit":"contain"}},null,8,$)):(r(),a("div",ee,t[17]||(t[17]=[e("i",{class:"bi bi-image fs-1"},null,-1),e("div",null,"No image",-1)])))])])]),e("div",te,[e("input",{ref_key:"fileInput",ref:f,type:"file",accept:"image/*",onChange:y,class:"form-control",style:{"max-width":"100%"}},null,544),e("button",{type:"button",class:"btn btn-outline-danger",onClick:x,title:"Remove image"},t[18]||(t[18]=[e("i",{class:"bi bi-trash"},null,-1)]))]),t[21]||(t[21]=e("div",{class:"small text-muted mb-3"},"Allowed: jpeg, png, gif, svg â€” max 5MB",-1)),e("div",se,[t[19]||(t[19]=e("label",{class:"form-label fw-semibold"},"Location",-1)),d(e("input",{type:"text","onUpdate:modelValue":t[6]||(t[6]=o=>l(s).location=o),class:"form-control",placeholder:"Where it was found / lost"},null,512),[[m,l(s).location]])])])]),e("div",le,[t[22]||(t[22]=e("label",{class:"form-label fw-semibold"},"Description",-1)),d(e("textarea",{"onUpdate:modelValue":t[7]||(t[7]=o=>l(s).description=o),class:"form-control",rows:"4",placeholder:"Add more details"},null,512),[[m,l(s).description]]),l(s).errors.description?(r(),a("div",oe,c(l(s).errors.description),1)):u("",!0)]),e("div",ie,[e("a",{href:p.route("dashboard"),class:"btn btn-outline-secondary"},"Cancel",8,ne),e("button",{type:"submit",class:"btn btn-primary",disabled:l(s).processing},t[23]||(t[23]=[e("i",{class:"bi bi-save me-2"},null,-1),g(" Save Changes ")]),8,ae)])],32)])]),Object.keys(l(s).errors).length?(r(),a("div",re,[e("div",de,[e("ul",me,[(r(!0),a(V,null,R(l(s).errors,(o,w)=>(r(),a("li",{key:w},c(o),1))),128))])])])):u("",!0)])])]))}},be=U(ue,[["__scopeId","data-v-f99b2978"]]);export{be as default};
