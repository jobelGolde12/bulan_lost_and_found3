import{_ as M,M as O,r as l,L as A,x as j,j as N,c as u,o as d,b as n,h as _,n as B,t as o,u as E}from"./app-DhelKfHf.js";const L={class:"announcement-card"},U={class:"card-wrapper"},V={class:"card-header"},$={class:"title-container"},q=["aria-label"],z={class:"date"},F={class:"content-container"},P={class:"content"},W={class:"card-footer"},G=["src"],H={class:"author"},J={__name:"AnnouncementCard",props:O({announcement:{type:Object,required:!0}},{selected:{},selectedModifiers:{}}),emits:["update:selected"],setup(f){const b=f,e=l({});let w=A(f,"selected");const r=l(!1),a=l(!1),h=l(160),v=l(10),C=j().props.auth;N(()=>b.announcement,t=>{e.value=t},{immediate:!0});const x=(t,s="en-US",c={})=>{const i={...{year:"numeric",month:"long",day:"numeric"},...c},m=new Date(t);return isNaN(m)?"Invalid date":new Intl.DateTimeFormat(s,i).format(m)},S=t=>{w.value=t},T=()=>{r.value=!r.value},k=()=>{a.value=!a.value},g=()=>e.value.content&&e.value.content.length>h.value,y=()=>e.value.title?e.value.title.split(/\s+/).length>v.value:!1,D=()=>{if(!e.value.content)return"";if(r.value||!g())return e.value.content;const t=e.value.content.substring(0,h.value),s=t.lastIndexOf(" ");return s>0?t.substring(0,s)+"...":t+"..."},I=()=>{if(!e.value.title)return"";const t=e.value.title.split(/\s+/);return t.length>v.value&&!a.value?t.slice(0,v.value).join(" ")+"...":e.value.title};return(t,s)=>{var c,p,i;return d(),u("div",L,[n("div",U,[n("div",V,[n("div",$,[n("h2",{class:B(["title",{"title-expanded":a.value}])},o(I()),3),y()?(d(),u("button",{key:0,onClick:k,class:"title-toggle-btn","aria-label":a.value?"Show less title":"Show more title"},o(a.value?"See less":"See more"),9,q)):_("",!0)]),E(C).user.role==="admin"?(d(),u("button",{key:0,class:"delete-btn",onClick:s[0]||(s[0]=m=>S(e.value.id)),"data-bs-toggle":"modal","data-bs-target":"#exampleModal","aria-label":"Delete announcement"},s[1]||(s[1]=[n("i",{class:"bi bi-trash3"},null,-1)]))):_("",!0)]),n("p",z,o(x(e.value.created_at)),1),n("div",F,[n("p",P,o(D()),1),g()?(d(),u("button",{key:0,onClick:T,class:"see-more-btn"},o(r.value?"Show less":"Show more"),1)):_("",!0)]),n("div",W,[n("img",{class:"profile-pic",src:(c=e.value.user_profile)!=null&&c.profile_pic?`/storage/${e.value.user_profile.profile_pic}`:"https://via.placeholder.com/40",alt:"Profile"},null,8,G),n("span",H,o(((i=(p=e.value)==null?void 0:p.user)==null?void 0:i.name)||"User"),1)])])])}}},R=M(J,[["__scopeId","data-v-1a9fda43"]]);export{R as A};
