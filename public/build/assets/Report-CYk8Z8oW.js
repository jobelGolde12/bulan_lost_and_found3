import{_ as N,r as c,l as A,y as I,c as o,o as r,b as s,F as C,s as L,k as S,A as U,h as g,t as u,J as q,n as M,W as B}from"./app-DhelKfHf.js";const T={class:"container-fluid mt-5 px-0"},V={class:"card border-0 shadow-sm"},W={class:"card-body"},j={class:"header-container d-flex flex-wrap justify-content-between align-items-center mb-3"},E={class:"filter-buttons d-flex flex-wrap justify-content-center gap-2"},O=["onClick"],z={key:0,class:"bi bi-exclamation-triangle-fill"},J={key:1,class:"bi bi-check-circle-fill"},P={key:2,class:"bi bi-flag-fill"},Q={key:3,class:"bi bi-question-circle-fill"},Y={class:"filter-text"},G={class:"search-container mt-2 mt-md-0"},H={class:"table-container"},K={class:"table table-hover"},X=["onClick"],Z={key:0,class:"text-primary"},ee={key:1},te={key:0},se={key:0,class:"text-center py-3 text-muted"},ae={class:"mt-3 text-muted small"},ne={__name:"Report",setup(oe){const v=c([]),b=c(1),m=c(!0),f=c(!1),x=c(null),h=c(""),_=c(""),y=async(a=1,t=!1)=>{if(!f.value){f.value=!0;try{const e=await q.get(route("admin.items"),{params:{page:a,status:h.value||null}}),n=e.data.data||[];t?v.value=n:v.value.push(...n),m.value=!!e.data.next_page_url,b.value=e.data.current_page}catch(e){console.error("Error fetching items:",e)}finally{f.value=!1}}},$=()=>{const a=document.querySelector("#scroll-trigger");a&&(x.value=new IntersectionObserver(async t=>{t[0].isIntersecting&&m.value&&!f.value&&await y(b.value+1)},{threshold:.1}),x.value.observe(a))},w=a=>{if(!a)return"N/A";const t={year:"numeric",month:"long",day:"numeric"};return new Date(a).toLocaleDateString(void 0,t)},D=a=>{const t=new Date(a),n=Math.floor((new Date-t)/(1e3*60*60*24));if(n<1)return"Today";if(n===1)return"1 day ago";if(n<7)return`${n} days ago`;const i=Math.floor(n/7);if(i<4)return`${i} week${i>1?"s":""} ago`;const d=Math.floor(n/30);if(d<12)return`${d} month${d>1?"s":""} ago`;const l=Math.floor(n/365);return l>=1?`Unsolved (${l} year${l>1?"s":""} ago)`:`${l} year${l>1?"s":""} ago`},F=async a=>{h.value=a,await y(1,!0)},p=A(()=>{const a=_.value.toLowerCase();return v.value.filter(t=>{var d,l,k;const e=(d=t==null?void 0:t.title)==null?void 0:d.toLowerCase().includes(a),n=(l=w(t==null?void 0:t.created_at))==null?void 0:l.toLowerCase().includes(a),i=(k=t==null?void 0:t.status)==null?void 0:k.toLowerCase().includes(a);return e||n||i})}),R=a=>{B.visit(route("viewItemInfoAsAdmin",{item:a}))};return I(async()=>{await y(),$()}),(a,t)=>(r(),o("div",T,[s("div",V,[s("div",W,[s("div",j,[t[1]||(t[1]=s("h5",{class:"card-title mb-2 mb-md-0"},"Reports",-1)),s("div",E,[(r(),o(C,null,L(["Lost","Found","Resolved","Unsolved"],e=>s("button",{key:e,class:M(["btn filter-btn d-flex align-items-center gap-1",h.value===e?"btn-primary":"btn-outline-secondary"]),onClick:n=>F(e)},[e==="Lost"?(r(),o("i",z)):e==="Found"?(r(),o("i",J)):e==="Resolved"?(r(),o("i",P)):e==="Unsolved"?(r(),o("i",Q)):g("",!0),s("span",Y,u(e),1)],10,O)),64))]),s("div",G,[S(s("input",{"onUpdate:modelValue":t[0]||(t[0]=e=>_.value=e),type:"text",class:"form-control search",placeholder:"Search by name, date, or status..."},null,512),[[U,_.value]])])]),s("div",H,[s("table",K,[t[3]||(t[3]=s("thead",null,[s("tr",null,[s("th",null,"Name"),s("th",null,"Date"),s("th",null,"Since"),s("th",null,"Status")])],-1)),s("tbody",null,[(r(!0),o(C,null,L(p.value,(e,n)=>(r(),o("tr",{key:e.id||n,onClick:i=>R(e.id),class:"clickable-row"},[s("td",null,u(e.title||"N/A"),1),s("td",null,u(w(e.created_at)),1),s("td",null,u(D(e.created_at)),1),s("td",null,[s("span",{class:M(["badge",{"text-primary":e.status==="Claimed","text-danger":e.status==="Lost","text-success":e.status==="Found","text-secondary":!e.status}])},[e.status==="Claimed"?(r(),o("span",Z,"Resolved")):(r(),o("span",ee,u(e.status||"N/A"),1))],2)])],8,X))),128)),p.value.length===0?(r(),o("tr",te,t[2]||(t[2]=[s("td",{colspan:"4",class:"text-center text-muted"},"No Record Found.",-1)]))):g("",!0)])]),f.value?(r(),o("div",se,"Loading...")):g("",!0),t[4]||(t[4]=s("div",{id:"scroll-trigger",class:"py-3"},null,-1))]),s("div",ae," Showing "+u(p.value.length)+" items in record. ",1)])])]))}},le=N(ne,[["__scopeId","data-v-52873ec5"]]);export{le as default};
