import{_,r as i,j as k,c as a,o as l,a as m,b as t,u as r,m as h,w as g,t as N,P as C,e as L,F as y,s as S,I as D,h as B,W as O}from"./app-CkqW5iWM.js";import{A as V}from"./AdminLayout-CrcGyJxQ.js";import{A as F}from"./AnnouncementCard-CSXWwB8p.js";import"./lost_and_found_logo-Bi2rL7qL.js";const I={class:"main-container bg-light container-fluid py-4"},M={class:"header-container d-flex flex-wrap justify-content-between align-items-center mb-4"},P={class:"d-flex flex-wrap align-items-center gap-3"},T={key:0,class:"row d-flex flex-row mx-auto announcement-grid g-3"},j={key:1,class:"text-center py-5"},W={key:0,class:"text-muted"},E={__name:"Announcement",props:{ann:{type:Array,default:()=>[]}},setup(x){const b=x;let o=i([]);i("");let n=i(null);const u=i("latest"),f=i("all"),p=()=>{let s=[...b.ann];f.value==="viewed"?s=s.filter(e=>e.read_status===1):f.value==="unviewed"&&(s=s.filter(e=>e.read_status===0)),s.sort((e,c)=>{const d=new Date(e.created_at),v=new Date(c.created_at);return u.value==="latest"?v-d:d-v}),o.value=s},w=()=>{u.value=u.value==="latest"?"oldest":"latest",p()};k(()=>b.ann,()=>{p()},{immediate:!0});const A=()=>{n.value&&O.delete(route("settings.announcement.destroy",{id:n.value}),{onSuccess:()=>{o.value=o.value.filter(s=>s.id!=n.value),setTimeout(()=>{alert("Deleted successfully...")},1e3)}})};return(s,e)=>(l(),a(y,null,[m(r(h),{title:"Announcements"}),m(V,null,{default:g(()=>[t("div",I,[t("div",M,[e[3]||(e[3]=t("h1",{class:"text-dark fw-light mb-3 mb-md-0"},"Announcements",-1)),t("div",P,[t("div",{class:"sort-btn text-dark fs-6 pointer d-flex align-items-center",onClick:w,title:"Sort announcements"},[e[1]||(e[1]=t("i",{class:"bi bi-sort-down me-2"},null,-1)),t("span",null,N(u.value==="latest"?"Latest → Oldest":"Oldest → Latest"),1)]),m(r(C),{href:s.route("settings.addAnnouncementPage"),class:"btn btn-success d-flex align-items-center"},{default:g(()=>e[2]||(e[2]=[t("i",{class:"bi bi-plus-lg me-2"},null,-1),L(" New ")])),_:1},8,["href"])])]),r(o).length?(l(),a("div",T,[(l(!0),a(y,null,S(r(o),c=>(l(),a("div",{key:c.id,class:"col-12 col-6"},[m(F,{announcement:c,selected:r(n),"onUpdate:selected":e[0]||(e[0]=d=>D(n)?n.value=d:n=d)},null,8,["announcement","selected"])]))),128))])):(l(),a("div",j,[e[4]||(e[4]=t("h4",null,"No announcements found.",-1)),f.value!=="all"?(l(),a("p",W," Try changing your filter settings. ")):B("",!0)]))])]),_:1}),t("div",{class:"modal fade",id:"exampleModal",tabindex:"-1","aria-labelledby":"exampleModalLabel","aria-hidden":"true"},[t("div",{class:"modal-dialog"},[t("div",{class:"modal-content"},[e[6]||(e[6]=t("div",{class:"modal-header"},[t("h1",{class:"modal-title fs-5",id:"exampleModalLabel"},"Delete Announcement"),t("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"})],-1)),e[7]||(e[7]=t("div",{class:"modal-body"}," Are you sure you want to delete the announcement? ",-1)),t("div",{class:"modal-footer"},[e[5]||(e[5]=t("button",{type:"button",class:"btn btn-secondary","data-bs-dismiss":"modal"}," No ",-1)),t("button",{type:"button",class:"btn btn-danger",onClick:A,"data-bs-dismiss":"modal"}," Yes ")])])])])],64))}},z=_(E,[["__scopeId","data-v-007c3c44"]]);export{z as default};
