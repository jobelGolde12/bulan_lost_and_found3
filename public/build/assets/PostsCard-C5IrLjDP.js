import{_ as I,r as p,j as U,c as o,o as n,b as i,F as B,s as D,a as h,w as g,h as F,t as _,u as y,P as k,n as u,J as N}from"./app-CkqW5iWM.js";const x={class:"card-grid"},z={key:0,class:"empty-state"},L={key:1,class:"card-grid__container"},V={class:"item-card__image-container"},j=["src","alt"],A={class:"item-card__image-overlay"},E={class:"item-card__date"},J={class:"item-card__content"},S={class:"item-card__details"},T={class:"item-card__title"},q=["title"],G={class:"item-card__category"},H={class:"item-card__footer"},K={class:"user-info__avatar"},M=["src","alt"],O={class:"user-info__name"},Q=["disabled","onClick"],R={key:0,class:"bi bi-arrow-repeat animate-spin text-gray-500"},W={__name:"PostsCard",props:{items:{type:Array,default:()=>[]}},setup(w){const b=w,m=p([]),l=p([]);U(()=>b.items,s=>{m.value=s},{immediate:!0});const C=async s=>{var a;if(l.value.includes(s))return;l.value.push(s);const t=m.value.find(r=>r.id===s),e=(a=t.view_later)==null?void 0:a.some(r=>r.item_id===s);try{await N.post(`viewLater/add-view-later/${s}`),e?t.view_later=[]:t.view_later=[{item_id:s}]}catch(r){console.error("Failed to update view later:",r)}finally{l.value=l.value.filter(r=>r!==s)}},P=s=>{if(!s)return"";const t={year:"numeric",month:"long",day:"numeric"};return new Date(s).toLocaleDateString(void 0,t)},$=(s,t=20)=>s?s.length>t?`${s.slice(0,t)}...`:s:"";return(s,t)=>(n(),o("div",x,[m.value.length===0?(n(),o("div",z,t[0]||(t[0]=[i("i",{class:"bi bi-inbox empty-state__icon"},null,-1),i("p",{class:"empty-state__text"},"No items found",-1)]))):(n(),o("div",L,[(n(!0),o(B,null,D(m.value,e=>{var a,r;return n(),o("article",{key:e.id,class:"item-card"},[h(y(k),{href:s.route("viewItemInfo",{item:e.id}),class:"item-card__image-link"},{default:g(()=>[i("div",V,[e.image_url?(n(),o("img",{key:0,src:e.image_url,alt:`Image of ${e.title}`,class:"item-card__image",loading:"lazy"},null,8,j)):F("",!0),i("div",A,[i("time",E,_(P(e==null?void 0:e.created_at)),1)])])]),_:2},1032,["href"]),i("div",J,[i("div",S,[i("h3",T,_(e.title||"Untitled"),1),i("p",{class:"item-card__description",title:e.description},_($(e.description,25)),9,q),i("span",G,_(e.category||"Uncategorized"),1)]),i("div",H,[h(y(k),{href:e!=null&&e.user?s.route("view.userAsUser",{id:e.user.id}):"#",class:u(["user-info",{"user-info--disabled":!(e!=null&&e.user)}])},{default:g(()=>{var c,d,f,v;return[i("div",K,[i("img",{src:(d=(c=e.user)==null?void 0:c.user_info)!=null&&d.profile_pic?`/storage/${e.user.user_info.profile_pic}`:"/images/profile.jpeg",alt:`Profile of ${(f=e.user)==null?void 0:f.name}`,class:"user-info__image"},null,8,M)]),i("span",O,_(((v=e.user)==null?void 0:v.name)||"Unknown User"),1)]}),_:2},1032,["href","class"]),i("button",{class:u(["item-card__action",{"item-card__action--active":(a=e.view_later)==null?void 0:a.some(c=>c.item_id===e.id)}]),disabled:l.value.includes(e.id),onClick:c=>C(e.id)},[l.value.includes(e.id)?(n(),o("i",R)):(n(),o("i",{key:1,class:u(["bi",(r=e.view_later)!=null&&r.some(c=>c.item_id===e.id)?"bi-bookmark-fill":"bi-bookmark"])},null,2))],10,Q)])])])}),128))])),t[1]||(t[1]=i("div",{class:"bottom-spacer"},null,-1))]))}},Y=I(W,[["__scopeId","data-v-25e30446"]]);export{Y as P};
